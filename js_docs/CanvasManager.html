<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Class: CanvasManager</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Class: CanvasManager</h1>

    




<section>

<header>
    
        <h2>CanvasManager</h2>
        
            <div class="class-description">The Canvas manager is a central "view" class in this game. It greatly limits the accessability to the underlying fabric.js-canvas, but (in doing so) ensures that certain position values, scaling and rotating the canvas work smoothly.  It handles clicks by using a circle that gets moved to the mouse's position. The circle's position can be updated via methods of this class, and there are callbacks for if it hits anything.</div>
        
    
</header>

<article>
    <div class="container-overview">
    
        

    
    <h2>Constructor</h2>
    

    <h4 class="name" id="CanvasManager"><span class="type-signature"></span>new CanvasManager<span class="signature">($contentArea)</span><span class="type-signature"></span></h4>

    



<div class="description">
    CanvasManager constructor. Creates a fabric canvas around the specified jQuery handle.
</div>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>$contentArea</code></td>
            

            <td class="type">
            
                
<span class="param-type">jQuery</span>


            
            </td>

            

            

            <td class="description last">a fabric canvas will be created and appended to the specified element.</td>
        </tr>

    
    </tbody>
</table>






<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="view_canvas_manager.js.html">view/canvas_manager.js</a>, <a href="view_canvas_manager.js.html#line18">line 18</a>
    </li></ul></dd>
    

    

    

    
</dl>
















    
    </div>

    

    

    

     

    

    

    
        <h3 class="subsection-title">Methods</h3>

        
            

    

    <h4 class="name" id="_getObjectByCreationTime"><span class="type-signature"></span>_getObjectByCreationTime<span class="signature">(timeCreated)</span><span class="type-signature"> &rarr; {fabric.Object}</span></h4>

    



<div class="description">
    _getObjectByCreationTime searches through all the objects that are on the canvas and have the specified tag for the one that has the specified timestamp, and returns it if it exists.
</div>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>timeCreated</code></td>
            

            <td class="type">
            
                
<span class="param-type">number</span>


            
            </td>

            

            

            <td class="description last">timestamp of the object (in .additionalData.timeCreated)</td>
        </tr>

    
    </tbody>
</table>






<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="view_canvas_manager.js.html">view/canvas_manager.js</a>, <a href="view_canvas_manager.js.html#line471">line 471</a>
    </li></ul></dd>
    

    

    

    
</dl>













<h5>Returns:</h5>

        
<div class="param-desc">
    the Object if there is one with the specified time; null, otherwise
</div>



<dl>
    <dt>
        Type
    </dt>
    <dd>
        
<span class="param-type">fabric.Object</span>


    </dd>
</dl>

    



        
            

    

    <h4 class="name" id="_initVisualLayer"><span class="type-signature"></span>_initVisualLayer<span class="signature">()</span><span class="type-signature"></span></h4>

    



<div class="description">
    _initVisualLayer adds a fabric.Group to the canvas that all other objects will be added to. this is helpful because all objects on it get rotated, scaled, and translated when these operations are applied to the group itself. Coordinates are always respective to the map and independent of where it currently is on the screen.  Using this was a design choice that made some things easier and other things harder, and it is a part that could only be removed with massive changes to the rest.
</div>













<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="view_canvas_manager.js.html">view/canvas_manager.js</a>, <a href="view_canvas_manager.js.html#line616">line 616</a>
    </li></ul></dd>
    

    

    

    
</dl>
















        
            

    

    <h4 class="name" id="_setCursorPosition"><span class="type-signature"></span>_setCursorPosition<span class="signature">(elementCoordinates)</span><span class="type-signature"></span></h4>

    



<div class="description">
    _setCursorPosition moves the selection circle around
</div>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>elementCoordinates</code></td>
            

            <td class="type">
            
                
<span class="param-type">object</span>


            
            </td>

            

            

            <td class="description last">position on the canvas element; must contain "x" and "y" keys.</td>
        </tr>

    
    </tbody>
</table>






<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="view_canvas_manager.js.html">view/canvas_manager.js</a>, <a href="view_canvas_manager.js.html#line190">line 190</a>
    </li></ul></dd>
    

    

    

    
</dl>
















        
            

    

    <h4 class="name" id="_unScaleMarkersAndEdges"><span class="type-signature"></span>_unScaleMarkersAndEdges<span class="signature">()</span><span class="type-signature"></span></h4>

    



<div class="description">
    _unScaleMarkersAndEdges makes markers always appear in the same size, regardless of how far in/out the user zooms. (edges is still in the name, but they are not affected yet)
</div>













<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="view_canvas_manager.js.html">view/canvas_manager.js</a>, <a href="view_canvas_manager.js.html#line573">line 573</a>
    </li></ul></dd>
    

    

    

    
</dl>
















        
            

    

    <h4 class="name" id="_updatePartOfGroup"><span class="type-signature"></span>_updatePartOfGroup<span class="signature">(fabricObj)</span><span class="type-signature"></span></h4>

    



<div class="description">
    _updatePartOfGroup in order to see the change in an object that is part of a fabric.Group, it needs to be removed from the group and added again. This method is a shorthand for those steps.
</div>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>fabricObj</code></td>
            

            <td class="type">
            
                
<span class="param-type">fabric.Object</span>


            
            </td>

            

            

            <td class="description last">object that is part of _visualsGroup</td>
        </tr>

    
    </tbody>
</table>






<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="view_canvas_manager.js.html">view/canvas_manager.js</a>, <a href="view_canvas_manager.js.html#line601">line 601</a>
    </li></ul></dd>
    

    

    

    
</dl>
















        
            

    

    <h4 class="name" id="addToVisualLayer"><span class="type-signature"></span>addToVisualLayer<span class="signature">(fabricObj)</span><span class="type-signature"></span></h4>

    



<div class="description">
    addToVisualLayer adds an object to the visual layer (not straight to the canvas). this object will receive the scale, rotation and position updates of the underlying map.
</div>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>fabricObj</code></td>
            

            <td class="type">
            
                
<span class="param-type">fabric.Object</span>


            
            </td>

            

            

            <td class="description last">any fabric object</td>
        </tr>

    
    </tbody>
</table>






<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="view_canvas_manager.js.html">view/canvas_manager.js</a>, <a href="view_canvas_manager.js.html#line82">line 82</a>
    </li></ul></dd>
    

    

    

    
</dl>
















        
            

    

    <h4 class="name" id="calculatePositionOnMap"><span class="type-signature"></span>calculatePositionOnMap<span class="signature">(canvasPos)</span><span class="type-signature"> &rarr; {fabric.Point}</span></h4>

    



<div class="description">
    Given a position on the canvas, returns the position on the map.
</div>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>canvasPos</code></td>
            

            <td class="type">
            
                
<span class="param-type">object</span>


            
            </td>

            

            

            <td class="description last">object with keys x, y</td>
        </tr>

    
    </tbody>
</table>






<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="view_canvas_manager.js.html">view/canvas_manager.js</a>, <a href="view_canvas_manager.js.html#line147">line 147</a>
    </li></ul></dd>
    

    

    

    
</dl>













<h5>Returns:</h5>

        
<div class="param-desc">
    point in transformed coordinates.
</div>



<dl>
    <dt>
        Type
    </dt>
    <dd>
        
<span class="param-type">fabric.Point</span>


    </dd>
</dl>

    



        
            

    

    <h4 class="name" id="canvasElement"><span class="type-signature"></span>canvasElement<span class="signature">()</span><span class="type-signature"> &rarr; {HTMLElement}</span></h4>

    















<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="view_canvas_manager.js.html">view/canvas_manager.js</a>, <a href="view_canvas_manager.js.html#line137">line 137</a>
    </li></ul></dd>
    

    

    

    
</dl>













<h5>Returns:</h5>

        
<div class="param-desc">
    the canvas's html element.
</div>



<dl>
    <dt>
        Type
    </dt>
    <dd>
        
<span class="param-type">HTMLElement</span>


    </dd>
</dl>

    



        
            

    

    <h4 class="name" id="canvasHeight"><span class="type-signature"></span>canvasHeight<span class="signature">()</span><span class="type-signature"> &rarr; {Number}</span></h4>

    















<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="view_canvas_manager.js.html">view/canvas_manager.js</a>, <a href="view_canvas_manager.js.html#line113">line 113</a>
    </li></ul></dd>
    

    

    

    
</dl>













<h5>Returns:</h5>

        
<div class="param-desc">
    the canvas's (coordinate system) height.
</div>



<dl>
    <dt>
        Type
    </dt>
    <dd>
        
<span class="param-type">Number</span>


    </dd>
</dl>

    



        
            

    

    <h4 class="name" id="canvasWidth"><span class="type-signature"></span>canvasWidth<span class="signature">()</span><span class="type-signature"> &rarr; {Number}</span></h4>

    















<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="view_canvas_manager.js.html">view/canvas_manager.js</a>, <a href="view_canvas_manager.js.html#line105">line 105</a>
    </li></ul></dd>
    

    

    

    
</dl>













<h5>Returns:</h5>

        
<div class="param-desc">
    the canvas's (coordinate system) width.
</div>



<dl>
    <dt>
        Type
    </dt>
    <dd>
        
<span class="param-type">Number</span>


    </dd>
</dl>

    



        
            

    

    <h4 class="name" id="centerImage"><span class="type-signature"></span>centerImage<span class="signature">()</span><span class="type-signature"></span></h4>

    



<div class="description">
    Positions the map at the center of the canvas.
</div>













<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="view_canvas_manager.js.html">view/canvas_manager.js</a>, <a href="view_canvas_manager.js.html#line255">line 255</a>
    </li></ul></dd>
    

    

    

    
</dl>
















        
            

    

    <h4 class="name" id="deleteAllEdges"><span class="type-signature"></span>deleteAllEdges<span class="signature">()</span><span class="type-signature"></span></h4>

    



<div class="description">
    deleteAllEdges removes all edges from the visual layer. Their logical representation is not affected by this. Obviously, use with caution.
</div>













<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="view_canvas_manager.js.html">view/canvas_manager.js</a>, <a href="view_canvas_manager.js.html#line522">line 522</a>
    </li></ul></dd>
    

    

    

    
</dl>
















        
            

    

    <h4 class="name" id="elementHeight"><span class="type-signature"></span>elementHeight<span class="signature">()</span><span class="type-signature"> &rarr; {Number}</span></h4>

    















<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="view_canvas_manager.js.html">view/canvas_manager.js</a>, <a href="view_canvas_manager.js.html#line129">line 129</a>
    </li></ul></dd>
    

    

    

    
</dl>













<h5>Returns:</h5>

        
<div class="param-desc">
    the canvas's (DOM element) height.
</div>



<dl>
    <dt>
        Type
    </dt>
    <dd>
        
<span class="param-type">Number</span>


    </dd>
</dl>

    



        
            

    

    <h4 class="name" id="elementWidth"><span class="type-signature"></span>elementWidth<span class="signature">()</span><span class="type-signature"> &rarr; {Number}</span></h4>

    















<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="view_canvas_manager.js.html">view/canvas_manager.js</a>, <a href="view_canvas_manager.js.html#line121">line 121</a>
    </li></ul></dd>
    

    

    

    
</dl>













<h5>Returns:</h5>

        
<div class="param-desc">
    the canvas's (DOM element) width.
</div>



<dl>
    <dt>
        Type
    </dt>
    <dd>
        
<span class="param-type">Number</span>


    </dd>
</dl>

    



        
            

    

    <h4 class="name" id="fixEdgeRotation"><span class="type-signature"></span>fixEdgeRotation<span class="signature">(edge)</span><span class="type-signature"></span></h4>

    



<div class="description">
    fixEdgeRotation ensures the edges on the canvas are rotated correctly and point straight from their start to their end nodes.
</div>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>edge</code></td>
            

            <td class="type">
            
                
<span class="param-type">fabric.Object</span>


            
            </td>

            

            

            <td class="description last">which edge/route</td>
        </tr>

    
    </tbody>
</table>






<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="view_canvas_manager.js.html">view/canvas_manager.js</a>, <a href="view_canvas_manager.js.html#line490">line 490</a>
    </li></ul></dd>
    

    

    

    
</dl>
















        
            

    

    <h4 class="name" id="getCurrentZoom"><span class="type-signature"></span>getCurrentZoom<span class="signature">()</span><span class="type-signature"> &rarr; {number}</span></h4>

    















<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="view_canvas_manager.js.html">view/canvas_manager.js</a>, <a href="view_canvas_manager.js.html#line163">line 163</a>
    </li></ul></dd>
    

    

    

    
</dl>













<h5>Returns:</h5>

        
<div class="param-desc">
    (horizontal) zoom level of the map.
</div>



<dl>
    <dt>
        Type
    </dt>
    <dd>
        
<span class="param-type">number</span>


    </dd>
</dl>

    



        
            

    

    <h4 class="name" id="getEdgeByCreationTime"><span class="type-signature"></span>getEdgeByCreationTime<span class="signature">(timeCreated)</span><span class="type-signature"> &rarr; {fabric.Object}</span></h4>

    



<div class="description">
    getEdgeByCreationTime searches through all the routes/edges that are on the canvas for the one that has the specified timestamp, and returns it if it exists.
</div>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>timeCreated</code></td>
            

            <td class="type">
            
                
<span class="param-type">number</span>


            
            </td>

            

            

            <td class="description last">timestamp of the edge (in .additionalData.timeCreated)</td>
        </tr>

    
    </tbody>
</table>






<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="view_canvas_manager.js.html">view/canvas_manager.js</a>, <a href="view_canvas_manager.js.html#line460">line 460</a>
    </li></ul></dd>
    

    

    

    
</dl>













<h5>Returns:</h5>

        
<div class="param-desc">
    Edge, if there is one with the specified time; null, otherwise
</div>



<dl>
    <dt>
        Type
    </dt>
    <dd>
        
<span class="param-type">fabric.Object</span>


    </dd>
</dl>

    



        
            

    

    <h4 class="name" id="getMarkerByCreationTime"><span class="type-signature"></span>getMarkerByCreationTime<span class="signature">(timeCreated)</span><span class="type-signature"> &rarr; {fabric.Object}</span></h4>

    



<div class="description">
    getMarkerByCreationTime searches through all the markers that are on the canvas for the one that has the specified timestamp, and returns it if it exists.
</div>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>timeCreated</code></td>
            

            <td class="type">
            
                
<span class="param-type">number</span>


            
            </td>

            

            

            <td class="description last">timestamp of the marker (in .additionalData.timeCreated)</td>
        </tr>

    
    </tbody>
</table>






<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="view_canvas_manager.js.html">view/canvas_manager.js</a>, <a href="view_canvas_manager.js.html#line449">line 449</a>
    </li></ul></dd>
    

    

    

    
</dl>













<h5>Returns:</h5>

        
<div class="param-desc">
    Marker, if there is one with the specified time; null, otherwise
</div>



<dl>
    <dt>
        Type
    </dt>
    <dd>
        
<span class="param-type">fabric.Object</span>


    </dd>
</dl>

    



        
            

    

    <h4 class="name" id="getViewportScale"><span class="type-signature"></span>getViewportScale<span class="signature">()</span><span class="type-signature"> &rarr; {number}</span></h4>

    



<div class="description">
    getViewportScale is NOT the scale of the image, but the ratio of the canvas' "internal" width and the DOM element's width.
</div>













<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="view_canvas_manager.js.html">view/canvas_manager.js</a>, <a href="view_canvas_manager.js.html#line72">line 72</a>
    </li></ul></dd>
    

    

    

    
</dl>













<h5>Returns:</h5>

        
<div class="param-desc">
    the fraction of the canvas' width
</div>



<dl>
    <dt>
        Type
    </dt>
    <dd>
        
<span class="param-type">number</span>


    </dd>
</dl>

    



        
            

    

    <h4 class="name" id="moveBy"><span class="type-signature"></span>moveBy<span class="signature">(moveBy, moveWhat)</span><span class="type-signature"></span></h4>

    



<div class="description">
    Moves the map (or object on the map, if specified) by the specified values (position of top left corner)
</div>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>moveBy</code></td>
            

            <td class="type">
            
                
<span class="param-type">object</span>


            
            </td>

            

            

            <td class="description last">values to move by; will be mutated (object with keys x, y).</td>
        </tr>

    

        <tr>
            
                <td class="name"><code>moveWhat</code></td>
            

            <td class="type">
            
                
<span class="param-type">fabric.Object</span>


            
            </td>

            

            

            <td class="description last">if specified, moves this instead of the whole map.</td>
        </tr>

    
    </tbody>
</table>






<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="view_canvas_manager.js.html">view/canvas_manager.js</a>, <a href="view_canvas_manager.js.html#line293">line 293</a>
    </li></ul></dd>
    

    

    

    
</dl>
















        
            

    

    <h4 class="name" id="moveCursor"><span class="type-signature"></span>moveCursor<span class="signature">(elementCoordinates, collisionCallback)</span><span class="type-signature"></span></h4>

    



<div class="description">
    moveCursor moves the selection circle around, and calls the callback methods to report    if it hits a marker, an edge or nothing
</div>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>elementCoordinates</code></td>
            

            <td class="type">
            
                
<span class="param-type">object</span>


            
            </td>

            

            

            <td class="description last">position on the canvas element; must contain "x" and "y" keys.</td>
        </tr>

    

        <tr>
            
                <td class="name"><code>collisionCallback</code></td>
            

            <td class="type">
            
                
<span class="param-type">object</span>


            
            </td>

            

            

            <td class="description last">object containing three methods: "markerHit", "routeHit" and "nothingHit".                                       depending on whether or not the selection circle collides with a marker,                                       is near an edge or hits nothing, one of these methods will be called.                                       marker hits have precedence over edge hits.</td>
        </tr>

    
    </tbody>
</table>






<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="view_canvas_manager.js.html">view/canvas_manager.js</a>, <a href="view_canvas_manager.js.html#line179">line 179</a>
    </li></ul></dd>
    

    

    

    
</dl>
















        
            

    

    <h4 class="name" id="moveTo"><span class="type-signature"></span>moveTo<span class="signature">(pos, moveWhat)</span><span class="type-signature"></span></h4>

    



<div class="description">
    Moves the map (or object on the map, if specified) to the specified position (position of top left corner)
</div>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>pos</code></td>
            

            <td class="type">
            
                
<span class="param-type">object</span>


            
            </td>

            

            

            <td class="description last">Coordinates to move to (object with keys x, y)</td>
        </tr>

    

        <tr>
            
                <td class="name"><code>moveWhat</code></td>
            

            <td class="type">
            
                
<span class="param-type">fabric.Object</span>


            
            </td>

            

            

            <td class="description last">if specified, moves this instead of the whole map.</td>
        </tr>

    
    </tbody>
</table>






<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="view_canvas_manager.js.html">view/canvas_manager.js</a>, <a href="view_canvas_manager.js.html#line273">line 273</a>
    </li></ul></dd>
    

    

    

    
</dl>
















        
            

    

    <h4 class="name" id="removeFromVisualLayer"><span class="type-signature"></span>removeFromVisualLayer<span class="signature">(fabricObj)</span><span class="type-signature"></span></h4>

    



<div class="description">
    removeFromVisualLayer removes an object from the visual layer of the canvas, which will hide it entirely (but not "destroy" the object.)
</div>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>fabricObj</code></td>
            

            <td class="type">
            
                
<span class="param-type">fabric.Object</span>


            
            </td>

            

            

            <td class="description last">some object that is on the canvas.</td>
        </tr>

    
    </tbody>
</table>






<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="view_canvas_manager.js.html">view/canvas_manager.js</a>, <a href="view_canvas_manager.js.html#line96">line 96</a>
    </li></ul></dd>
    

    

    

    
</dl>
















        
            

    

    <h4 class="name" id="rotateBy"><span class="type-signature"></span>rotateBy<span class="signature">(rotation, center, updateRender)</span><span class="type-signature"></span></h4>

    



<div class="description">
    Set relative rotation of the map.
</div>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>rotation</code></td>
            

            <td class="type">
            
                
<span class="param-type">Number</span>


            
            </td>

            

            

            <td class="description last">change in rotation</td>
        </tr>

    

        <tr>
            
                <td class="name"><code>center</code></td>
            

            <td class="type">
            
                
<span class="param-type">object</span>


            
            </td>

            

            

            <td class="description last">center of the rotation (object with keys x, y)</td>
        </tr>

    

        <tr>
            
                <td class="name"><code>updateRender</code></td>
            

            <td class="type">
            
                
<span class="param-type">updateRender</span>


            
            </td>

            

            

            <td class="description last">whether or not to re-render after this function (default is true)</td>
        </tr>

    
    </tbody>
</table>






<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="view_canvas_manager.js.html">view/canvas_manager.js</a>, <a href="view_canvas_manager.js.html#line388">line 388</a>
    </li></ul></dd>
    

    

    

    
</dl>
















        
            

    

    <h4 class="name" id="setMapImage"><span class="type-signature"></span>setMapImage<span class="signature">(fabricObj)</span><span class="type-signature"></span></h4>

    



<div class="description">
    setMapImage sets the background image to the specified object; also, performs a complete reset of the objects on display.
</div>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>fabricObj</code></td>
            

            <td class="type">
            
                
<span class="param-type">fabric.Image</span>


            
            </td>

            

            

            <td class="description last">Image that contains the map</td>
        </tr>

    
    </tbody>
</table>






<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="view_canvas_manager.js.html">view/canvas_manager.js</a>, <a href="view_canvas_manager.js.html#line48">line 48</a>
    </li></ul></dd>
    

    

    

    
</dl>
















        
            

    

    <h4 class="name" id="setRotation"><span class="type-signature"></span>setRotation<span class="signature">(rotation, center)</span><span class="type-signature"></span></h4>

    



<div class="description">
    Set absolute rotation of the map.
</div>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>rotation</code></td>
            

            <td class="type">
            
                
<span class="param-type">Number</span>


            
            </td>

            

            

            <td class="description last">new rotation</td>
        </tr>

    

        <tr>
            
                <td class="name"><code>center</code></td>
            

            <td class="type">
            
                
<span class="param-type">object</span>


            
            </td>

            

            

            <td class="description last">center of the rotation (object with keys x, y)</td>
        </tr>

    
    </tbody>
</table>






<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="view_canvas_manager.js.html">view/canvas_manager.js</a>, <a href="view_canvas_manager.js.html#line366">line 366</a>
    </li></ul></dd>
    

    

    

    
</dl>
















        
            

    

    <h4 class="name" id="toImageCoord"><span class="type-signature"></span>toImageCoord<span class="signature">(coordVal, isX)</span><span class="type-signature"> &rarr; {number}</span></h4>

    



<div class="description">
    toImageCoord transforms fractions of the canvas map's coordinates  (which is NOT the coordinate system the "native" image uses!! the height and width  is always the same on the canvas!) to "absolute" canvas map coordinates.
</div>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>coordVal</code></td>
            

            <td class="type">
            
                
<span class="param-type">number</span>


            
            </td>

            

            

            <td class="description last">e.g. 0 for the centre of the image.</td>
        </tr>

    

        <tr>
            
                <td class="name"><code>isX</code></td>
            

            <td class="type">
            
                
<span class="param-type">Boolean</span>


            
            </td>

            

            

            <td class="description last">true if this is the x coordinate.</td>
        </tr>

    
    </tbody>
</table>






<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="view_canvas_manager.js.html">view/canvas_manager.js</a>, <a href="view_canvas_manager.js.html#line559">line 559</a>
    </li></ul></dd>
    

    

    

    
</dl>













<h5>Returns:</h5>

        
<div class="param-desc">
    transformed coordinate.
</div>



<dl>
    <dt>
        Type
    </dt>
    <dd>
        
<span class="param-type">number</span>


    </dd>
</dl>

    



        
            

    

    <h4 class="name" id="toImageFraction"><span class="type-signature"></span>toImageFraction<span class="signature">(coordVal, isX)</span><span class="type-signature"> &rarr; {number}</span></h4>

    



<div class="description">
    toImageFraction transforms "absolute" canvas map coordinates  (which is NOT the coordinate system the "native" image uses!! the height and width  is always the same on the canvas!) to fractions of the total width & height.
</div>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>coordVal</code></td>
            

            <td class="type">
            
                
<span class="param-type">number</span>


            
            </td>

            

            

            <td class="description last">e.g. 0 for the centre of the image.</td>
        </tr>

    

        <tr>
            
                <td class="name"><code>isX</code></td>
            

            <td class="type">
            
                
<span class="param-type">Boolean</span>


            
            </td>

            

            

            <td class="description last">true if this is the x coordinate.</td>
        </tr>

    
    </tbody>
</table>






<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="view_canvas_manager.js.html">view/canvas_manager.js</a>, <a href="view_canvas_manager.js.html#line542">line 542</a>
    </li></ul></dd>
    

    

    

    
</dl>













<h5>Returns:</h5>

        
<div class="param-desc">
    transformed coordinate.
</div>



<dl>
    <dt>
        Type
    </dt>
    <dd>
        
<span class="param-type">number</span>


    </dd>
</dl>

    



        
            

    

    <h4 class="name" id="updateEdge"><span class="type-signature"></span>updateEdge<span class="signature">(edge)</span><span class="type-signature"></span></h4>

    



<div class="description">
    updateEdge re-renders the edge.
</div>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>edge</code></td>
            

            <td class="type">
            
                
<span class="param-type">fabric.Object</span>


            
            </td>

            

            

            <td class="description last">which edge to update</td>
        </tr>

    
    </tbody>
</table>






<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="view_canvas_manager.js.html">view/canvas_manager.js</a>, <a href="view_canvas_manager.js.html#line511">line 511</a>
    </li></ul></dd>
    

    

    

    
</dl>
















        
            

    

    <h4 class="name" id="updateMarker"><span class="type-signature"></span>updateMarker<span class="signature">(marker)</span><span class="type-signature"></span></h4>

    



<div class="description">
    updateMarker re-renders the marker.
</div>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>marker</code></td>
            

            <td class="type">
            
                
<span class="param-type">fabric.Object</span>


            
            </td>

            

            

            <td class="description last">which marker to update</td>
        </tr>

    
    </tbody>
</table>






<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="view_canvas_manager.js.html">view/canvas_manager.js</a>, <a href="view_canvas_manager.js.html#line501">line 501</a>
    </li></ul></dd>
    

    

    

    
</dl>
















        
            

    

    <h4 class="name" id="zoomBy"><span class="type-signature"></span>zoomBy<span class="signature">(zoomDelta, center)</span><span class="type-signature"></span></h4>

    



<div class="description">
    Zooms by zoomDelta with "center" as the zoom center.
</div>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>zoomDelta</code></td>
            

            <td class="type">
            
                
<span class="param-type">Number</span>


            
            </td>

            

            

            <td class="description last">change in zoom level.</td>
        </tr>

    

        <tr>
            
                <td class="name"><code>center</code></td>
            

            <td class="type">
            
                
<span class="param-type">object</span>


            
            </td>

            

            

            <td class="description last">center of the zoom (object with keys x, y).</td>
        </tr>

    
    </tbody>
</table>






<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="view_canvas_manager.js.html">view/canvas_manager.js</a>, <a href="view_canvas_manager.js.html#line337">line 337</a>
    </li></ul></dd>
    

    

    

    
</dl>
















        
            

    

    <h4 class="name" id="zoomTo"><span class="type-signature"></span>zoomTo<span class="signature">(zoomLevel, center)</span><span class="type-signature"></span></h4>

    



<div class="description">
    Sets the zoom level and the center position.
</div>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>zoomLevel</code></td>
            

            <td class="type">
            
                
<span class="param-type">Number</span>


            
            </td>

            

            

            <td class="description last">new zoom level</td>
        </tr>

    

        <tr>
            
                <td class="name"><code>center</code></td>
            

            <td class="type">
            
                
<span class="param-type">object</span>


            
            </td>

            

            

            <td class="description last">center of the zoom (object with keys x, y).</td>
        </tr>

    
    </tbody>
</table>






<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="view_canvas_manager.js.html">view/canvas_manager.js</a>, <a href="view_canvas_manager.js.html#line319">line 319</a>
    </li></ul></dd>
    

    

    

    
</dl>
















        
    

    

    
</article>

</section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Classes</h3><ul><li><a href="AdditionalDataDialog.html">AdditionalDataDialog</a></li><li><a href="CanvasManager.html">CanvasManager</a></li><li><a href="EdgeControls.html">EdgeControls</a></li><li><a href="ElementScaler.html">ElementScaler</a></li><li><a href="GameApp.html">GameApp</a></li><li><a href="GameTitleBar.html">GameTitleBar</a></li><li><a href="MapControls.html">MapControls</a></li><li><a href="MapList.html">MapList</a></li><li><a href="MapPath.html">MapPath</a></li><li><a href="MapSelectionDialog.html">MapSelectionDialog</a></li><li><a href="MapSelectionHandler.html">MapSelectionHandler</a></li><li><a href="MapVisuals.html">MapVisuals</a></li><li><a href="MarkerControls.html">MarkerControls</a></li><li><a href="NewGameDialog.html">NewGameDialog</a></li><li><a href="Path.html">Path</a></li><li><a href="PathEdge.html">PathEdge</a></li><li><a href="PathManager.html">PathManager</a></li><li><a href="PathNode.html">PathNode</a></li><li><a href="ScoreDialog.html">ScoreDialog</a></li></ul><h3>Namespaces</h3><ul><li><a href="navigame.html">navigame</a></li></ul><h3>Global</h3><ul><li><a href="global.html#ImageLoader">ImageLoader</a></li><li><a href="global.html#Log">Log</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.4.0</a> on Tue Apr 11 2017 14:56:49 GMT+0200 (Mitteleuropäische Sommerzeit)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>